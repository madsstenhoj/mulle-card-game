(this["webpackJsonpmulle-online"]=this["webpackJsonpmulle-online"]||[]).push([[0],{362:function(e,t,a){e.exports=a(793)},643:function(e,t,a){},647:function(e,t,a){},793:function(e,t,a){"use strict";a.r(t);a(363),a(364),a(365),a(366),a(367),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(139),a(390),a(391),a(392),a(393),a(394),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(406),a(408),a(409),a(410),a(193),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(435),a(436),a(438),a(439),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(453),a(454),a(455),a(456),a(457),a(458),a(459),a(460),a(462),a(463),a(464),a(465),a(466),a(468),a(469),a(470),a(471),a(472),a(473),a(474),a(475),a(476),a(477),a(478),a(272),a(479),a(480),a(274),a(481),a(482),a(483),a(484),a(275),a(485),a(486),a(487),a(488),a(489),a(490),a(491),a(492),a(493),a(494),a(495),a(496),a(497),a(498),a(499),a(500),a(501),a(502),a(503),a(504),a(505),a(506),a(507),a(508),a(509),a(510),a(512),a(513),a(514),a(515),a(516),a(517),a(518),a(519),a(520),a(521),a(522),a(523),a(524),a(525),a(526),a(527),a(528),a(529),a(530),a(531),a(532),a(533),a(534),a(535),a(536),a(537),a(538),a(539),a(540),a(541),a(542),a(543),a(544),a(201),a(545),a(546),a(547),a(548),a(549),a(550),a(551),a(553),a(554),a(555),a(556),a(557),a(558),a(559),a(560),a(562),a(563),a(564),a(565),a(566),a(567),a(568),a(569),a(570),a(571),a(572),a(573),a(574),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(585),a(586),a(588),a(589),a(590),a(591),a(592),a(593),a(594),a(595),a(596),a(597),a(598),a(599),a(600),a(601),a(602),a(603),a(604),a(605),a(606),a(607),a(608),a(609),a(610),a(611),a(612),a(613),a(614),a(615),a(616),a(617),a(618),a(619),a(621),a(622),a(623),a(624),a(625),a(626),a(627),a(628),a(629),a(630),a(631),a(632),a(633),a(634),a(635),a(636),a(638),a(286);var r,n,o,c,i,l,s,d,u=a(0),p=a.n(u),m=a(67),h=a.n(m),g=a(38),y=(a(643),a(644),a(55)),b=a(56),f=a(100),v=a(101),E=a(78),O=a(171),P=a(174),I=a(45),k=(a(202),a(10)),j=(a(647),a(808)),C=a(794),A=a(802),w=a(133),F=a(809),U=a(801),D=a(349),R=a(172),L=a(807),M=a(805),N=a(806),S=Object(g.b)("store")(Object(g.c)((function(e){var t=e.backsideUp,a=e.cardId,r=e.store,n=Object(N.a)({item:{name:a,type:Z.CARD},end:function(t,a){var r=a.getDropResult();t&&r&&e.store.emitCardMove(r.name,Number(t.name))},collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(R.a)(n,2),c=o[0].isDragging,i=o[1],l=r.getPlayingCard(a);"Joker"===l.value||l.value;return p.a.createElement("div",{ref:i,style:{width:50,opacity:c?.5:1,cursor:"move",margin:"0 auto"}},p.a.createElement(M.a,{onClick:function(){var t;e.selectable&&(null===(t=e.store)||void 0===t||t.selectCard(e.cardId))},style:{width:50,height:70}},t?p.a.createElement("img",{src:"/mulle-card-game/img/bagside.png",alt:"",style:{width:"100%"}}):p.a.createElement("div",{style:{position:"relative",height:70,width:50,padding:8,fontWeight:"bold",border:"1px solid #DDD",borderRadius:5}},"Joker"===l.value?p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:"/mulle-card-game/img/".concat(l.color),alt:"",style:{width:40,height:40}})):p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:"/mulle-card-game/img/".concat(l.color),alt:"",style:{width:30,height:30,position:"absolute",top:0,right:10}}),l.number<=10&&p.a.createElement("div",{style:{width:25,textAlign:"center",right:15,top:35,fontSize:30,color:"ruder.png"===l.color||"hjerter.png"===l.color?"red":"black",position:"absolute"}},l.value),l.number>10&&p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:"/mulle-card-game/img/".concat(l.number,".png"),alt:"",style:{width:45,height:45,position:"absolute",top:25,right:5}}))))))}))),_=Object(g.c)(S),T=a(810),z=a(804),J=Object(g.b)("store")(Object(g.c)((function(e){var t=e.cardIds.length?e.cardIds[e.cardIds.length-1]:void 0,a=e.piled&&!e.backsideUp&&e.cardIds.length>0;return p.a.createElement(T.a.Group,{style:{minWidth:70}},p.a.createElement(T.a,{textAlign:"center"},e.piled&&p.a.createElement(C.a,{size:"large",onClick:function(){return e.store.putCard(e.position)},icon:"arrow alternate circle down"}),e.title&&p.a.createElement("span",null,e.title)),void 0!==t&&p.a.createElement(p.a.Fragment,null,e.piled?p.a.createElement(p.a.Fragment,null,p.a.createElement(T.a,{piled:!0,textAlign:"center"},p.a.createElement(_,{cardId:t,backsideUp:e.backsideUp,selectable:void 0===e.store.selectedCardId}),p.a.createElement(z.a,{flowing:!0,trigger:p.a.createElement(C.a,{content:e.cardIds.length}),content:p.a.createElement("span",null,e.cardIds.map((function(t){return p.a.createElement(_,{selectable:!1,backsideUp:e.backsideUp,cardId:t})})))})),p.a.createElement(T.a,{textAlign:"center"},p.a.createElement(C.a.Group,null,a&&p.a.createElement(z.a,{trigger:p.a.createElement(C.a,{size:"large",icon:"globe",onClick:function(){return e.store.takePileHome(e.position)}}),content:"Tag bunken hjem",inverted:!0})))):p.a.createElement(M.a.Group,{itemsPerRow:10},e.cardIds.sort((function(t,a){var r=e.store.getPlayingCard(t),n=e.store.getPlayingCard(a),o=n.number-r.number,c=n.points-r.points;return"joker.png"===r.color?-1:0===c?o:c})).map((function(t){return p.a.createElement(_,{backsideUp:e.backsideUp,cardId:t,selectable:!0})})))))}))),Y=Object(g.b)("store")(Object(g.c)((function(e){var t=Object(L.a)({accept:Z.CARD,drop:function(){return{name:e.position}},collect:function(e){return{isOver:!!e.isOver(),getItem:e.getItem()}}}),a=Object(R.a)(t,2),r=(a[0].isOver,a[1]),n=e.store.getCardsForPile(e.position);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{ref:r},p.a.createElement(J,{piled:e.piled,cardIds:n,backsideUp:e.backsideUp,title:e.title,position:e.position})))})));!function(e){e[e.HAND=0]="HAND",e[e.SVUPPER=1]="SVUPPER",e[e.MULLE=2]="MULLE",e[e.POINTS=3]="POINTS"}(l||(l={})),function(e){e[e.CARD_MOVE=0]="CARD_MOVE"}(s||(s={})),function(e){e[e.MAIN=0]="MAIN",e[e.PLAYER=1]="PLAYER",e[e.PLAY_AREA=2]="PLAY_AREA"}(d||(d={}));var x,V,H,B,W,G,K,Q,$,q=(r=function(){function e(){var t=this;Object(f.a)(this,e),this.gameId="",this.playerId="",this.socket=new WebSocket("wss://c0gv6ahxt5.execute-api.eu-west-1.amazonaws.com/Prod"),Object(b.a)(this,"cardPiles",n,this),Object(b.a)(this,"cards",o,this),Object(b.a)(this,"players",c,this),Object(b.a)(this,"selectedCardId",i,this),this.init=function(e,a){t.gameId=e,t.playerId=a,t.cards=t.createDeck(2),t.shuffleCards(),t.addPlayers(4),t.cardPiles.push({position:"main",cardIds:t.cards.map((function(e){return e.id})),pileType:d.MAIN});for(var r=0;r<10;r++)t.cardPiles.push({position:"play_".concat(r),cardIds:[],pileType:d.PLAY_AREA});t.socket.addEventListener("open",(function(e){console.log("Websocket open")})),t.socket.addEventListener("message",(function(e){t.updateGameState(e.data)}))},this.createDeck=function(e){for(var a=["K","Q","J","10","9","8","7","6","5","4","3","2","A"],r=["ruder.png","kloer.png","hjerter.png","spar.png"],n=[],o=0,c=0;c<e;c++){var i,l=Object(y.a)(r);try{for(l.s();!(i=l.n()).done;){var s,d=i.value,u=Object(y.a)(a);try{for(u.s();!(s=u.n()).done;){var p=s.value,m=t.getPointsForCard(d,p);n.push({value:p,color:d,id:o,points:m,number:t.getNumberForCard(p)}),o++}}catch(g){u.e(g)}finally{u.f()}}}catch(g){l.e(g)}finally{l.f()}for(var h=0;h<3;h++)n.push({value:"Joker",color:"joker.png",id:o,points:1,number:1}),o++}return n},this.shuffleCards=function(){for(var e,a,r=t.cards.length;0!==r;)a=Math.floor(Math.random()*r),r-=1,e=t.cards[r],t.cards[r]=t.cards[a],t.cards[a]=e}}return Object(v.a)(e,[{key:"getNumberForCard",value:function(e){switch(e){case"A":return 1;case"K":return 13;case"Q":return 12;case"J":return 11;default:return Number(e)}}},{key:"getPointsForCard",value:function(e,t){return"A"===t?1:"2"===t&&"spar.png"===e||"10"===t&&"ruder.png"===e||"5"===t&&"spar.png"===e?2:"5"===t&&"kloer.png"===e||"4"===t&&"hjerter.png"===e?3:"6"===t&&"ruder.png"===e?4:0}},{key:"addPlayers",value:function(e){for(var t=1;t<e+1;t++){var a="player".concat(t);this.players.push({id:a,name:this.getPlayerName(a),pointsInTotal:0}),this.cardPiles.push({position:"".concat(a,"_").concat(l.HAND),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.SVUPPER),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.POINTS),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.MULLE),cardIds:[],pileType:d.PLAYER})}}},{key:"getPlayerName",value:function(e){switch(e){case"player1":return"Mads";case"player2":return"Anna";case"player3":return"Farmor";case"player4":return"Farfar"}return""}},{key:"dealCardsToAllPlayers",value:function(e){var t,a=this.getCardsForPile("main"),r=Object(y.a)(this.players);try{for(r.s();!(t=r.n()).done;)for(var n=t.value,o=0;o<e;o++){var c=a.pop();this.emitCardMove("".concat(n.id,"_").concat(l.HAND),c)}}catch(i){r.e(i)}finally{r.f()}}},{key:"getCardsForPile",value:function(e){var t=this.cardPiles.filter((function(t){return t.position===e}));return t.length?t[0].cardIds:[]}},{key:"emitCardMove",value:function(e,t){var a={type:s.CARD_MOVE,move:{toPile:e,cardId:t}};this.socket.send(JSON.stringify({message:"sendmessage",data:JSON.stringify(a)}))}},{key:"getPlayingCard",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"moveCardFromOnePileToAnother",value:function(e,t){var a,r=Object(y.a)(this.cardPiles);try{for(r.s();!(a=r.n()).done;){var n=a.value;n.position===t?-1===n.cardIds.indexOf(e)&&n.cardIds.push(e):n.cardIds=n.cardIds.filter((function(t){return t!==e}))}}catch(o){r.e(o)}finally{r.f()}}},{key:"takePileHome",value:function(e){var t,a=this.getCardsForPile(e),r="".concat(this.playerId,"_").concat(l.POINTS),n=Object(y.a)(a);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.emitCardMove(r,o)}}catch(c){n.e(c)}finally{n.f()}}},{key:"updateGameState",value:function(e){try{var t=JSON.parse(e);if(t.move)this.cardPiles.find((function(e){return e.position===t.move.toPile}))&&this.moveCardFromOnePileToAnother(t.move.cardId,t.move.toPile),this.selectedCardId=void 0}catch(a){return void console.log(a)}}},{key:"selectCard",value:function(e){this.selectedCardId=e}},{key:"putCard",value:function(e){this.selectedCardId&&e&&(this.emitCardMove(e,this.selectedCardId),this.selectedCardId=void 0)}}]),e}(),n=Object(I.a)(r.prototype,"cardPiles",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(I.a)(r.prototype,"cards",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(I.a)(r.prototype,"players",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(I.a)(r.prototype,"selectedCardId",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(I.a)(r.prototype,"moveCardFromOnePileToAnother",[k.f],Object.getOwnPropertyDescriptor(r.prototype,"moveCardFromOnePileToAnother"),r.prototype),r),X=Object(g.b)("store")(x=Object(g.c)((V=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(f.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(b.a)(e,"player",H,Object(E.a)(e)),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.store.players.filter((function(t){return t.id===e.props.playerId}));0!==t.length&&(this.player=t[0])}},{key:"render",value:function(){if(!this.player)return null;var e=this.props.store;return p.a.createElement(T.a,null,p.a.createElement("h2",null,e.getPlayerName(this.props.playerId)),p.a.createElement(T.a,null,p.a.createElement(J,{piled:!1,backsideUp:this.props.playerId!==this.props.store.playerId,cardIds:e.getCardsForPile("".concat(this.player.id,"_").concat(l.HAND))})),p.a.createElement(T.a,null,p.a.createElement(w.a,{content:"Faste point: ".concat(this.points)}),p.a.createElement(w.a,{content:"L\xf8se point: ".concat(this.loosePoints)}),p.a.createElement(F.a,{columns:3},p.a.createElement(F.a.Column,null,p.a.createElement(Y,{piled:!0,backsideUp:!1,position:"".concat(this.player.id,"_").concat(l.SVUPPER),title:"Svuppere"})),p.a.createElement(F.a.Column,null,p.a.createElement(Y,{piled:!0,backsideUp:!0,position:"".concat(this.player.id,"_").concat(l.POINTS),title:"Bunken"})),p.a.createElement(F.a.Column,null,p.a.createElement(Y,{piled:!0,backsideUp:!1,position:"".concat(this.player.id,"_").concat(l.MULLE),title:"Muller"})))),p.a.createElement(T.a,null,e&&e.selectedCardId&&this.props.playerId===e.playerId&&p.a.createElement(_,{backsideUp:!1,cardId:e.selectedCardId,selectable:!1})))}},{key:"points",get:function(){var e=this.props,t=e.store,a=e.playerId;if(!t)return 0;var r,n=t.getCardsForPile("".concat(a,"_").concat(l.POINTS)),o=t.getCardsForPile("".concat(a,"_").concat(l.MULLE)),c=t.getCardsForPile("".concat(a,"_").concat(l.SVUPPER)),i=0,s=Object(y.a)(n.concat(o).concat(c));try{for(s.s();!(r=s.n()).done;){var d=r.value;i+=t.getPlayingCard(d).points}}catch(u){s.e(u)}finally{s.f()}return i}},{key:"loosePoints",get:function(){var e=this.props,t=e.store,a=e.playerId;if(!t)return 0;var r,n=t.getCardsForPile("".concat(a,"_").concat(l.SVUPPER)),o=t.getCardsForPile("".concat(a,"_").concat(l.MULLE)),c=0,i=Object(y.a)(n);try{for(i.s();!(r=i.n()).done;){r.value;c++}}catch(u){i.e(u)}finally{i.f()}var s,d=Object(y.a)(o);try{for(d.s();!(s=d.n()).done;){s.value;c+=5}}catch(u){d.e(u)}finally{d.f()}return c}}]),a}(u.Component),H=Object(I.a)(V.prototype,"player",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(I.a)(V.prototype,"points",[k.g],Object.getOwnPropertyDescriptor(V.prototype,"points"),V.prototype),Object(I.a)(V.prototype,"loosePoints",[k.g],Object.getOwnPropertyDescriptor(V.prototype,"loosePoints"),V.prototype),x=V))||x)||x,Z={CARD:"card"},ee=Object(g.b)("store")(B=Object(g.c)((W=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(f.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(b.a)(e,"showBackside",G,Object(E.a)(e)),Object(b.a)(e,"putInStack",K,Object(E.a)(e)),Object(b.a)(e,"isOver",Q,Object(E.a)(e)),Object(b.a)(e,"dealAmount",$,Object(E.a)(e)),e.changeDealAmount=function(t,a){e.dealAmount=a.value},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.getPlayerId();this.props.store.init("test",e)}},{key:"getPlayerId",value:function(){var e=window.location.href.split("?");if(e.length<2)return"";var t=e[1].split("=");return"playerId"===t[0]?t[1]:""}},{key:"render",value:function(){var e=this,t=this.props.store;return t&&0!==t.cards.length?p.a.createElement(U.a,{backend:D.a},p.a.createElement(j.a,{as:"h1"},"Mulle!"),"player1"===t.playerId&&p.a.createElement("div",{style:{padding:30,marginBottom:50,backgroundColor:"#AAA"}},p.a.createElement(J,{piled:!0,cardIds:t.getCardsForPile("main"),backsideUp:!0}),p.a.createElement(C.a,{onClick:function(){return t.dealCardsToAllPlayers(Number(e.dealAmount))}},"Fordel kort"),p.a.createElement(A.a,{value:this.dealAmount,onChange:this.changeDealAmount}),p.a.createElement(w.a,{content:this.points})),p.a.createElement(F.a,{columns:3,divided:!0},p.a.createElement(F.a.Row,null,p.a.createElement(F.a.Column,null,p.a.createElement(X,{playerId:"player1"})),p.a.createElement(F.a.Column,null,p.a.createElement(X,{playerId:"player2"})))),p.a.createElement(F.a,{columns:10,style:{width:"80%",margin:"0 auto"}},t.cardPiles.filter((function(e){return e.pileType===d.PLAY_AREA})).map((function(e){return p.a.createElement(F.a.Column,null,p.a.createElement(Y,{position:e.position,piled:!0,backsideUp:!1}))}))),p.a.createElement(F.a,{columns:3,divided:!0},p.a.createElement(F.a.Row,null,p.a.createElement(F.a.Column,null,p.a.createElement(X,{playerId:"player3"})),p.a.createElement(F.a.Column,null,p.a.createElement(X,{playerId:"player4"}))))):null}},{key:"points",get:function(){var e=this.props.store;if(!e)return 0;var t,a=0,r=Object(y.a)(e.getCardsForPile("main"));try{for(r.s();!(t=r.n()).done;){var n=t.value;a+=e.getPlayingCard(n).points}}catch(o){r.e(o)}finally{r.f()}return a}}]),a}(u.Component),G=Object(I.a)(W.prototype,"showBackside",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=Object(I.a)(W.prototype,"putInStack",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=Object(I.a)(W.prototype,"isOver",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=Object(I.a)(W.prototype,"dealAmount",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"8"}}),Object(I.a)(W.prototype,"points",[k.g],Object.getOwnPropertyDescriptor(W.prototype,"points"),W.prototype),B=W))||B)||B;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=new q;h.a.render(p.a.createElement(p.a.StrictMode,null,p.a.createElement(g.a,{store:te},p.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[362,1,2]]]);
//# sourceMappingURL=main.7da89e42.chunk.js.map