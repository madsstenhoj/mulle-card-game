(this["webpackJsonpmulle-online"]=this["webpackJsonpmulle-online"]||[]).push([[0],{198:function(e,t,a){e.exports=a(351)},203:function(e,t,a){},205:function(e,t,a){},351:function(e,t,a){"use strict";a.r(t);var r,n,o,i,c,l,s,d,u=a(0),p=a.n(u),m=a(30),h=a.n(m),b=a(20),g=(a(203),a(24)),f=a(25),y=a(50),v=a(51),E=a(35),O=a(84),P=a(87),I=a(22),k=(a(91),a(7)),C=(a(205),a(368)),j=a(352),A=a(360),w=a(65),D=a(367),U=a(359),F=a(185),R=a(85),L=a(365),M=a(363),S=a(364),T=Object(b.b)("store")(Object(b.c)((function(e){var t=e.backsideUp,a=e.cardId,r=e.store,n=Object(S.a)({item:{name:a,type:Z.CARD},end:function(t,a){var r=a.getDropResult();t&&r&&e.store.emitCardMove(r.name,Number(t.name))},collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(R.a)(n,2),i=o[0].isDragging,c=o[1],l=r.getPlayingCard(a);"Joker"===l.value||l.value;return p.a.createElement("div",{ref:c,style:{width:60,opacity:i?.5:1,cursor:"move",margin:5}},p.a.createElement(M.a,{onClick:function(){var t;e.selectable&&(null===(t=e.store)||void 0===t||t.selectCard(e.cardId))},style:{width:60,height:80}},t?p.a.createElement("img",{src:"/mulle-card-game/img/bagside.png",alt:"",style:{width:"100%"}}):p.a.createElement("div",{style:{position:"relative",height:80,width:60,padding:8,fontWeight:"bold",border:"1px solid #DDD",borderRadius:5}},"Joker"===l.value?p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:"/mulle-card-game/img/".concat(l.color),alt:"",style:{width:50,height:50}}),p.a.createElement("span",{style:{width:45,height:45,position:"absolute",top:55,right:4,color:"black"}},"Joker")):p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:"/mulle-card-game/img/".concat(l.color),alt:"",style:{width:30,height:30,position:"absolute",top:5,right:15}}),l.number<=10&&p.a.createElement("div",{style:{width:20,textAlign:"center",right:20,top:40,fontSize:30,color:"ruder.png"===l.color||"hjerter.png"===l.color?"red":"black",position:"absolute"}},l.number),l.number>10&&p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{src:"/mulle-card-game/img/".concat(l.number,".png"),alt:"",style:{width:45,height:45,position:"absolute",top:30}}))))))}))),_=Object(b.c)(T),N=a(362),z=Object(b.b)("store")(Object(b.c)((function(e){var t=e.cardIds.length?e.cardIds[e.cardIds.length-1]:void 0,a=e.piled&&!e.backsideUp&&e.cardIds.length>1;return p.a.createElement("div",{style:{position:"relative"}},p.a.createElement("div",{style:{position:"absolute",top:-30}},e.piled&&p.a.createElement(j.a,{size:"small",onClick:function(){return e.store.putCard(e.position)},icon:"arrow alternate circle down"}),e.title&&p.a.createElement("span",null,e.title)),void 0!==t&&p.a.createElement(p.a.Fragment,null,e.piled?p.a.createElement("div",{style:{paddingTop:20}},p.a.createElement(_,{cardId:t,backsideUp:e.backsideUp,selectable:void 0===e.store.selectedCardId}),p.a.createElement(j.a.Group,null,p.a.createElement(N.a,{flowing:!0,trigger:p.a.createElement(j.a,{content:e.cardIds.length}),content:p.a.createElement("span",null,e.cardIds.map((function(t){return p.a.createElement(_,{selectable:!1,backsideUp:e.backsideUp,cardId:t})})))}),a&&p.a.createElement(N.a,{trigger:p.a.createElement(j.a,{icon:"globe",onClick:function(){return e.store.takePileHome(e.position)}}),content:"Tag bunken hjem",inverted:!0}))):p.a.createElement(M.a.Group,{itemsPerRow:10},e.cardIds.sort().map((function(t){return p.a.createElement(_,{backsideUp:e.backsideUp,cardId:t,selectable:!0})})))))}))),J=Object(b.b)("store")(Object(b.c)((function(e){var t=Object(L.a)({accept:Z.CARD,drop:function(){return{name:e.position}},collect:function(e){return{isOver:!!e.isOver(),getItem:e.getItem()}}}),a=Object(R.a)(t,2),r=a[0].isOver,n=a[1],o=e.store.getCardsForPile(e.position);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{ref:n,style:{backgroundColor:r?"#DDD":"#EEE",width:80,height:130,marginTop:50}},p.a.createElement(z,{piled:e.piled,cardIds:o,backsideUp:e.backsideUp,title:e.title,position:e.position})))})));!function(e){e[e.HAND=0]="HAND",e[e.SVUPPER=1]="SVUPPER",e[e.MULLE=2]="MULLE",e[e.POINTS=3]="POINTS"}(l||(l={})),function(e){e[e.CARD_MOVE=0]="CARD_MOVE"}(s||(s={})),function(e){e[e.MAIN=0]="MAIN",e[e.PLAYER=1]="PLAYER",e[e.PLAY_AREA=2]="PLAY_AREA"}(d||(d={}));var Y,V,H,x,B,W,G,K,Q,$=(r=function(){function e(){var t=this;Object(y.a)(this,e),this.gameId="",this.playerId="",this.socket=new WebSocket("wss://c0gv6ahxt5.execute-api.eu-west-1.amazonaws.com/Prod"),Object(f.a)(this,"cardPiles",n,this),Object(f.a)(this,"cards",o,this),Object(f.a)(this,"players",i,this),Object(f.a)(this,"selectedCardId",c,this),this.init=function(e,a){t.gameId=e,t.playerId=a,t.cards=t.createDeck(2),t.shuffleCards(),t.addPlayers(3),t.cardPiles.push({position:"main",cardIds:t.cards.map((function(e){return e.id})),pileType:d.MAIN});for(var r=0;r<10;r++)t.cardPiles.push({position:"play_".concat(r),cardIds:[],pileType:d.PLAY_AREA});t.socket.addEventListener("open",(function(e){console.log("Websocket open")})),t.socket.addEventListener("message",(function(e){t.updateGameState(e.data)}))},this.createDeck=function(e){for(var a=["K","Q","J","10","9","8","7","6","5","4","3","2","A"],r=["ruder.png","kloer.png","hjerter.png","spar.png"],n=[],o=0,i=0;i<e;i++){var c,l=Object(g.a)(r);try{for(l.s();!(c=l.n()).done;){var s,d=c.value,u=Object(g.a)(a);try{for(u.s();!(s=u.n()).done;){var p=s.value,m=t.getPointsForCard(d,p);n.push({value:p,color:d,id:o,points:m,number:t.getNumberForCard(p)}),o++}}catch(b){u.e(b)}finally{u.f()}}}catch(b){l.e(b)}finally{l.f()}for(var h=0;h<3;h++)n.push({value:"Joker",color:"joker.png",id:o,points:1,number:1}),o++}return n},this.shuffleCards=function(){for(var e,a,r=t.cards.length;0!==r;)a=Math.floor(Math.random()*r),r-=1,e=t.cards[r],t.cards[r]=t.cards[a],t.cards[a]=e}}return Object(v.a)(e,[{key:"getNumberForCard",value:function(e){switch(e){case"A":return 1;case"K":return 13;case"Q":return 12;case"J":return 11;default:return Number(e)}}},{key:"getPointsForCard",value:function(e,t){return"A"===t?1:"2"===t&&"spar.png"===e||"10"===t&&"ruder.png"===e||"5"===t&&"spar.png"===e?2:"5"===t&&"kloer.png"===e||"4"===t&&"hjerter.png"===e?3:"6"===t&&"ruder.png"===e?4:0}},{key:"addPlayers",value:function(e){for(var t=1;t<e+1;t++){var a="player".concat(t);this.players.push({id:a,name:"",pointsInTotal:0}),this.cardPiles.push({position:"".concat(a,"_").concat(l.HAND),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.SVUPPER),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.POINTS),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.MULLE),cardIds:[],pileType:d.PLAYER})}}},{key:"dealCardsToAllPlayers",value:function(e){var t,a=this.getCardsForPile("main"),r=Object(g.a)(this.players);try{for(r.s();!(t=r.n()).done;)for(var n=t.value,o=0;o<e;o++){var i=a.pop();this.emitCardMove("".concat(n.id,"_").concat(l.HAND),i)}}catch(c){r.e(c)}finally{r.f()}}},{key:"getCardsForPile",value:function(e){var t=this.cardPiles.filter((function(t){return t.position===e}));return t.length?t[0].cardIds:[]}},{key:"emitCardMove",value:function(e,t){var a={type:s.CARD_MOVE,move:{toPile:e,cardId:t}};this.socket.send(JSON.stringify({message:"sendmessage",data:JSON.stringify(a)}))}},{key:"getPlayingCard",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"moveCardFromOnePileToAnother",value:function(e,t){var a,r=Object(g.a)(this.cardPiles);try{for(r.s();!(a=r.n()).done;){var n=a.value;n.position===t?-1===n.cardIds.indexOf(e)&&n.cardIds.push(e):n.cardIds=n.cardIds.filter((function(t){return t!==e}))}}catch(o){r.e(o)}finally{r.f()}}},{key:"takePileHome",value:function(e){var t,a=this.getCardsForPile(e),r="".concat(this.playerId,"_").concat(l.POINTS),n=Object(g.a)(a);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.emitCardMove(r,o)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateGameState",value:function(e){try{var t=JSON.parse(e);if(t.move)this.cardPiles.find((function(e){return e.position===t.move.toPile}))&&this.moveCardFromOnePileToAnother(t.move.cardId,t.move.toPile),this.selectedCardId=void 0}catch(a){return void console.log(a)}}},{key:"selectCard",value:function(e){this.selectedCardId=e}},{key:"putCard",value:function(e){this.selectedCardId&&e&&(this.emitCardMove(e,this.selectedCardId),this.selectedCardId=void 0)}}]),e}(),n=Object(I.a)(r.prototype,"cardPiles",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(I.a)(r.prototype,"cards",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(I.a)(r.prototype,"players",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(I.a)(r.prototype,"selectedCardId",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(I.a)(r.prototype,"moveCardFromOnePileToAnother",[k.f],Object.getOwnPropertyDescriptor(r.prototype,"moveCardFromOnePileToAnother"),r.prototype),r),q=a(366),X=Object(b.b)("store")(Y=Object(b.c)((V=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(y.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(f.a)(e,"player",H,Object(E.a)(e)),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.store.players.filter((function(t){return t.id===e.props.playerId}));0!==t.length&&(this.player=t[0])}},{key:"render",value:function(){if(!this.player)return null;var e=this.props.store;return p.a.createElement(q.a,null,p.a.createElement("h2",null,this.props.playerId),p.a.createElement(q.a,null,p.a.createElement(z,{piled:!1,backsideUp:this.props.playerId!==this.props.store.playerId,cardIds:e.getCardsForPile("".concat(this.player.id,"_").concat(l.HAND))})),p.a.createElement(q.a,null,p.a.createElement(w.a,{content:"Faste point: ".concat(this.points)}),p.a.createElement(w.a,{content:"L\xf8se point: ".concat(this.loosePoints)}),p.a.createElement(D.a,{columns:3},p.a.createElement(D.a.Column,null,p.a.createElement(J,{piled:!0,backsideUp:!1,position:"".concat(this.player.id,"_").concat(l.SVUPPER),title:"Svuppere"})),p.a.createElement(D.a.Column,null,p.a.createElement(J,{piled:!0,backsideUp:!0,position:"".concat(this.player.id,"_").concat(l.POINTS),title:"Bunken"})),p.a.createElement(D.a.Column,null,p.a.createElement(J,{piled:!0,backsideUp:!1,position:"".concat(this.player.id,"_").concat(l.MULLE),title:"Muller"})))),p.a.createElement(q.a,null,e&&e.selectedCardId&&this.props.playerId===e.playerId&&p.a.createElement(_,{backsideUp:!1,cardId:e.selectedCardId,selectable:!1})))}},{key:"points",get:function(){var e=this.props,t=e.store,a=e.playerId;if(!t)return 0;var r,n=t.getCardsForPile("".concat(a,"_").concat(l.POINTS)),o=t.getCardsForPile("".concat(a,"_").concat(l.MULLE)),i=t.getCardsForPile("".concat(a,"_").concat(l.SVUPPER)),c=0,s=Object(g.a)(n.concat(o).concat(i));try{for(s.s();!(r=s.n()).done;){var d=r.value;c+=t.getPlayingCard(d).points}}catch(u){s.e(u)}finally{s.f()}return c}},{key:"loosePoints",get:function(){var e=this.props,t=e.store,a=e.playerId;if(!t)return 0;var r,n=t.getCardsForPile("".concat(a,"_").concat(l.SVUPPER)),o=t.getCardsForPile("".concat(a,"_").concat(l.MULLE)),i=0,c=Object(g.a)(n);try{for(c.s();!(r=c.n()).done;){r.value;i++}}catch(u){c.e(u)}finally{c.f()}var s,d=Object(g.a)(o);try{for(d.s();!(s=d.n()).done;){s.value;i+=5}}catch(u){d.e(u)}finally{d.f()}return i}}]),a}(u.Component),H=Object(I.a)(V.prototype,"player",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(I.a)(V.prototype,"points",[k.g],Object.getOwnPropertyDescriptor(V.prototype,"points"),V.prototype),Object(I.a)(V.prototype,"loosePoints",[k.g],Object.getOwnPropertyDescriptor(V.prototype,"loosePoints"),V.prototype),Y=V))||Y)||Y,Z={CARD:"card"},ee=Object(b.b)("store")(x=Object(b.c)((B=function(e){Object(P.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(y.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(f.a)(e,"showBackside",W,Object(E.a)(e)),Object(f.a)(e,"putInStack",G,Object(E.a)(e)),Object(f.a)(e,"isOver",K,Object(E.a)(e)),Object(f.a)(e,"dealAmount",Q,Object(E.a)(e)),e.changeDealAmount=function(t,a){e.dealAmount=a.value},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.getPlayerId();this.props.store.init("test",e)}},{key:"getPlayerId",value:function(){var e=window.location.href.split("?");if(e.length<2)return"";var t=e[1].split("=");return"playerId"===t[0]?t[1]:""}},{key:"render",value:function(){var e=this,t=this.props.store;return t&&0!==t.cards.length?p.a.createElement(U.a,{backend:F.a},p.a.createElement(C.a,{as:"h1"},"Mulle!"),"player1"===t.playerId&&p.a.createElement(p.a.Fragment,null,p.a.createElement(z,{piled:!0,cardIds:t.getCardsForPile("main"),backsideUp:!0}),p.a.createElement(j.a,{onClick:function(){return t.dealCardsToAllPlayers(Number(e.dealAmount))}},"Fordel kort"),p.a.createElement(A.a,{value:this.dealAmount,onChange:this.changeDealAmount}),p.a.createElement(w.a,{content:this.points})),p.a.createElement(D.a,{columns:3,divided:!0},p.a.createElement(D.a.Row,null,p.a.createElement(D.a.Column,null,p.a.createElement(X,{playerId:"player1"})),p.a.createElement(D.a.Column,null,p.a.createElement(D.a,{columns:5},t.cardPiles.filter((function(e){return e.pileType===d.PLAY_AREA})).map((function(e){return p.a.createElement(D.a.Column,null,p.a.createElement(J,{position:e.position,piled:!0,backsideUp:!1}))})))),p.a.createElement(D.a.Column,null,p.a.createElement(X,{playerId:"player2"}))),p.a.createElement(D.a.Row,null,p.a.createElement(D.a.Column,null),p.a.createElement(D.a.Column,null,p.a.createElement(X,{playerId:"player3"})),p.a.createElement(D.a.Column,null)))):null}},{key:"points",get:function(){var e=this.props.store;if(!e)return 0;var t,a=0,r=Object(g.a)(e.getCardsForPile("main"));try{for(r.s();!(t=r.n()).done;){var n=t.value;a+=e.getPlayingCard(n).points}}catch(o){r.e(o)}finally{r.f()}return a}}]),a}(u.Component),W=Object(I.a)(B.prototype,"showBackside",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Object(I.a)(B.prototype,"putInStack",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=Object(I.a)(B.prototype,"isOver",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=Object(I.a)(B.prototype,"dealAmount",[k.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"8"}}),Object(I.a)(B.prototype,"points",[k.g],Object.getOwnPropertyDescriptor(B.prototype,"points"),B.prototype),x=B))||x)||x;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=new $;h.a.render(p.a.createElement(p.a.StrictMode,null,p.a.createElement(b.a,{store:te},p.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[198,1,2]]]);
//# sourceMappingURL=main.befd8444.chunk.js.map