(this["webpackJsonpmulle-online"]=this["webpackJsonpmulle-online"]||[]).push([[0],{200:function(e,t,a){e.exports=a(353)},205:function(e,t,a){},207:function(e,t,a){},353:function(e,t,a){"use strict";a.r(t);var r,n,o,i,c,l,s,d,u=a(0),p=a.n(u),m=a(29),b=a.n(m),h=a(20),f=(a(205),a(24)),y=a(50),v=a(51),g=a(35),E=a(86),O=a(88),P=a(22),I=(a(92),a(7)),k=(a(207),a(369)),j=a(354),C=a(362),A=a(370),w=a(361),D=a(186),U=a(87),R=a(367),F=a(188),L=a(365),T=a(366),M=Object(h.b)("store")(Object(h.c)((function(e){var t=e.backsideUp,a=e.cardId,r=e.store,n=Object(T.a)({item:{name:a,type:ee.CARD},end:function(t,a){var r=a.getDropResult();t&&r&&e.store.emitCardMove(r.name,Number(t.name))},collect:function(e){return{isDragging:!!e.isDragging()}}}),o=Object(U.a)(n,2),i=o[0].isDragging,c=o[1],l=r.getPlayingCard(a),s="Joker"===l.value?"":l.value;return p.a.createElement("div",{ref:c,style:{width:60,opacity:i?.5:1,cursor:"move",margin:5}},p.a.createElement(L.a,{onClick:function(){var t;e.selectable&&(null===(t=e.store)||void 0===t||t.selectCard(e.cardId))},style:{width:60,height:80}},t?p.a.createElement("img",{src:"/img/bagside.png",alt:"",style:{width:"100%"}}):p.a.createElement("div",{style:{position:"relative",height:80,width:60,padding:8,fontWeight:"bold",border:"1px solid #DDD",borderRadius:5}},p.a.createElement("span",{style:{position:"absolute",right:0,top:0}},s),p.a.createElement("span",{style:{position:"absolute",left:0,top:0}},s),p.a.createElement("span",{style:{position:"absolute",right:0,bottom:0}},s),p.a.createElement("span",{style:{position:"absolute",left:0,bottom:0}},s),p.a.createElement("div",{style:{right:10,top:10}},Object(F.a)(Array(l.number)).map((function(e){return p.a.createElement("img",{src:"/img/".concat(l.color),alt:"",style:{width:12,height:12}})}))))))}))),_=Object(h.c)(M),N=a(364),S=Object(h.b)("store")(Object(h.c)((function(e){var t=e.cardIds.length?e.cardIds[e.cardIds.length-1]:void 0,a=e.piled&&!e.backsideUp&&e.cardIds.length>1;return p.a.createElement("div",{style:{position:"relative"}},p.a.createElement("div",{style:{position:"absolute",top:-30}},e.piled&&p.a.createElement(j.a,{size:"small",onClick:function(){return e.store.putCard(e.position)},icon:"arrow alternate circle down"}),e.title&&p.a.createElement("span",null,e.title)),void 0!==t&&p.a.createElement(p.a.Fragment,null,e.piled?p.a.createElement("div",{style:{paddingTop:20}},p.a.createElement(_,{cardId:t,backsideUp:e.backsideUp,selectable:void 0===e.store.selectedCardId}),p.a.createElement(j.a.Group,null,p.a.createElement(N.a,{flowing:!0,trigger:p.a.createElement(j.a,{content:e.cardIds.length}),content:p.a.createElement("span",null,e.cardIds.map((function(t){return p.a.createElement(_,{selectable:!1,backsideUp:e.backsideUp,cardId:t})})))}),a&&p.a.createElement(N.a,{trigger:p.a.createElement(j.a,{icon:"globe",onClick:function(){return e.store.takePileHome(e.position)}}),content:"Tag bunken hjem",inverted:!0}))):p.a.createElement(L.a.Group,{itemsPerRow:10},e.cardIds.sort().map((function(t){return p.a.createElement(_,{backsideUp:e.backsideUp,cardId:t,selectable:!0})})))))}))),z=Object(h.b)("store")(Object(h.c)((function(e){var t=Object(R.a)({accept:ee.CARD,drop:function(){return{name:e.position}},collect:function(e){return{isOver:!!e.isOver(),getItem:e.getItem()}}}),a=Object(U.a)(t,2),r=a[0].isOver,n=a[1],o=e.store.getCardsForPile(e.position);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{ref:n,style:{backgroundColor:r?"#DDD":"#EEE",width:80,height:130,marginTop:50}},p.a.createElement(S,{piled:e.piled,cardIds:o,backsideUp:e.backsideUp,title:e.title,position:e.position})))}))),Y=a(31);!function(e){e[e.HAND=0]="HAND",e[e.SVUPPER=1]="SVUPPER",e[e.MULLE=2]="MULLE",e[e.POINTS=3]="POINTS"}(l||(l={})),function(e){e[e.CARD_MOVE=0]="CARD_MOVE"}(s||(s={})),function(e){e[e.MAIN=0]="MAIN",e[e.PLAYER=1]="PLAYER",e[e.PLAY_AREA=2]="PLAY_AREA"}(d||(d={}));var J,V,H,x,B,W,G,K,Q,$=(r=function(){function e(){var t=this;Object(y.a)(this,e),this.gameId="",this.playerId="",this.socket=new WebSocket("wss://c0gv6ahxt5.execute-api.eu-west-1.amazonaws.com/Prod"),Object(f.a)(this,"cardPiles",n,this),Object(f.a)(this,"cards",o,this),Object(f.a)(this,"players",i,this),Object(f.a)(this,"selectedCardId",c,this),this.init=function(e,a){t.gameId=e,t.playerId=a,t.cards=t.createDeck(2),t.shuffleCards(),t.addPlayers(2),t.cardPiles.push({position:"main",cardIds:t.cards.map((function(e){return e.id})),pileType:d.MAIN});for(var r=0;r<10;r++)t.cardPiles.push({position:"play_".concat(r),cardIds:[],pileType:d.PLAY_AREA});t.socket.addEventListener("open",(function(e){console.log("Websocket open")})),t.socket.addEventListener("message",(function(e){t.updateGameState(e.data)}))},this.createDeck=function(e){for(var a=["K","Q","J","10","9","8","7","6","5","4","3","2","A"],r=["ruder.png","kloer.png","hjerter.png","spar.png"],n=[],o=0,i=0;i<e;i++){var c,l=Object(Y.a)(r);try{for(l.s();!(c=l.n()).done;){var s,d=c.value,u=Object(Y.a)(a);try{for(u.s();!(s=u.n()).done;){var p=s.value,m=t.getPointsForCard(d,p);n.push({value:p,color:d,id:o,points:m,number:t.getNumberForCard(p)}),o++}}catch(h){u.e(h)}finally{u.f()}}}catch(h){l.e(h)}finally{l.f()}for(var b=0;b<3;b++)n.push({value:"Joker",color:"joker.png",id:o,points:1,number:1}),o++}return n},this.shuffleCards=function(){for(var e,a,r=t.cards.length;0!==r;)a=Math.floor(Math.random()*r),r-=1,e=t.cards[r],t.cards[r]=t.cards[a],t.cards[a]=e}}return Object(v.a)(e,[{key:"getNumberForCard",value:function(e){switch(e){case"A":return 1;case"K":return 13;case"Q":return 12;case"J":return 11;default:return Number(e)}}},{key:"getPointsForCard",value:function(e,t){return"A"===t?1:"2"===t&&"spar.png"===e||"10"===t&&"ruder.png"===e?2:"5"===t&&"kloer.png"===e||"4"===t&&"hjerter.png"===e?3:"6"===t&&"ruder.png"===e?4:0}},{key:"addPlayers",value:function(e){for(var t=1;t<e+1;t++){var a="player".concat(t);this.players.push({id:a,name:"",pointsInTotal:0}),this.cardPiles.push({position:"".concat(a,"_").concat(l.HAND),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.SVUPPER),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.POINTS),cardIds:[],pileType:d.PLAYER}),this.cardPiles.push({position:"".concat(a,"_").concat(l.MULLE),cardIds:[],pileType:d.PLAYER})}}},{key:"dealCardsToAllPlayers",value:function(e){var t,a=this.getCardsForPile("main"),r=Object(Y.a)(this.players);try{for(r.s();!(t=r.n()).done;)for(var n=t.value,o=0;o<e;o++){var i=a.pop();this.emitCardMove("".concat(n.id,"_").concat(l.HAND),i)}}catch(c){r.e(c)}finally{r.f()}}},{key:"getCardsForPile",value:function(e){var t=this.cardPiles.filter((function(t){return t.position===e}));return t.length?t[0].cardIds:[]}},{key:"emitCardMove",value:function(e,t){var a={type:s.CARD_MOVE,move:{toPile:e,cardId:t}};this.socket.send(JSON.stringify({message:"sendmessage",data:JSON.stringify(a)}))}},{key:"getPlayingCard",value:function(e){return this.cards.find((function(t){return t.id===e}))}},{key:"moveCardFromOnePileToAnother",value:function(e,t){var a,r=Object(Y.a)(this.cardPiles);try{for(r.s();!(a=r.n()).done;){var n=a.value;n.position===t?-1===n.cardIds.indexOf(e)&&n.cardIds.push(e):n.cardIds=n.cardIds.filter((function(t){return t!==e}))}}catch(o){r.e(o)}finally{r.f()}}},{key:"takePileHome",value:function(e){var t,a=this.getCardsForPile(e),r="".concat(this.playerId,"_").concat(l.POINTS),n=Object(Y.a)(a);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.moveCardFromOnePileToAnother(o,r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateGameState",value:function(e){try{var t=JSON.parse(e);if(t.move)this.cardPiles.find((function(e){return e.position===t.move.toPile}))&&this.moveCardFromOnePileToAnother(t.move.cardId,t.move.toPile)}catch(a){return void console.log(a)}}},{key:"selectCard",value:function(e){this.selectedCardId=e}},{key:"putCard",value:function(e){this.selectedCardId&&e&&(this.emitCardMove(e,this.selectedCardId),this.selectedCardId=void 0)}}]),e}(),n=Object(P.a)(r.prototype,"cardPiles",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(P.a)(r.prototype,"cards",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=Object(P.a)(r.prototype,"players",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(P.a)(r.prototype,"selectedCardId",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(P.a)(r.prototype,"moveCardFromOnePileToAnother",[I.f],Object.getOwnPropertyDescriptor(r.prototype,"moveCardFromOnePileToAnother"),r.prototype),r),q=a(368),X=a(67),Z=Object(h.b)("store")(J=Object(h.c)((V=function(e){Object(O.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(y.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(f.a)(e,"player",H,Object(g.a)(e)),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.store.players.filter((function(t){return t.id===e.props.playerId}));0!==t.length&&(this.player=t[0])}},{key:"render",value:function(){if(!this.player)return null;var e=this.props.store;return p.a.createElement(q.a,null,p.a.createElement("h2",null,this.props.playerId),p.a.createElement(q.a,null,p.a.createElement(S,{piled:!1,backsideUp:this.props.playerId!==this.props.store.playerId,cardIds:e.getCardsForPile("".concat(this.player.id,"_").concat(l.HAND))})),p.a.createElement(q.a,null,p.a.createElement(X.a,{content:"Faste point: ".concat(this.points)}),p.a.createElement(X.a,{content:"L\xf8se point: ".concat(this.loosePoints)}),p.a.createElement(A.a,{columns:3},p.a.createElement(A.a.Column,null,p.a.createElement(z,{piled:!0,backsideUp:!1,position:"".concat(this.player.id,"_").concat(l.SVUPPER),title:"Svuppere"})),p.a.createElement(A.a.Column,null,p.a.createElement(z,{piled:!0,backsideUp:!0,position:"".concat(this.player.id,"_").concat(l.POINTS),title:"Bunken"})),p.a.createElement(A.a.Column,null,p.a.createElement(z,{piled:!0,backsideUp:!1,position:"".concat(this.player.id,"_").concat(l.MULLE),title:"Muller"})))),p.a.createElement(q.a,null,e&&e.selectedCardId&&this.props.playerId===e.playerId&&p.a.createElement(_,{backsideUp:!1,cardId:e.selectedCardId,selectable:!1})))}},{key:"points",get:function(){var e=this.props.store;if(!e)return 0;var t,a=e.getCardsForPile("".concat(e.playerId,"_").concat(l.POINTS)),r=e.getCardsForPile("".concat(e.playerId,"_").concat(l.MULLE)),n=e.getCardsForPile("".concat(e.playerId,"_").concat(l.SVUPPER)),o=0,i=Object(Y.a)(a.concat(r).concat(n));try{for(i.s();!(t=i.n()).done;){var c=t.value;o+=e.getPlayingCard(c).points}}catch(s){i.e(s)}finally{i.f()}return o}},{key:"loosePoints",get:function(){var e=this.props.store;if(!e)return 0;var t,a=e.getCardsForPile("".concat(e.playerId,"_").concat(l.SVUPPER)),r=e.getCardsForPile("".concat(e.playerId,"_").concat(l.MULLE)),n=0,o=Object(Y.a)(a);try{for(o.s();!(t=o.n()).done;){t.value;n++}}catch(s){o.e(s)}finally{o.f()}var i,c=Object(Y.a)(r);try{for(c.s();!(i=c.n()).done;){i.value;n+=5}}catch(s){c.e(s)}finally{c.f()}return n}}]),a}(u.Component),H=Object(P.a)(V.prototype,"player",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Object(P.a)(V.prototype,"points",[I.g],Object.getOwnPropertyDescriptor(V.prototype,"points"),V.prototype),Object(P.a)(V.prototype,"loosePoints",[I.g],Object.getOwnPropertyDescriptor(V.prototype,"loosePoints"),V.prototype),J=V))||J)||J,ee={CARD:"card"},te=Object(h.b)("store")(x=Object(h.c)((B=function(e){Object(O.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(y.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n)),Object(f.a)(e,"showBackside",W,Object(g.a)(e)),Object(f.a)(e,"putInStack",G,Object(g.a)(e)),Object(f.a)(e,"isOver",K,Object(g.a)(e)),Object(f.a)(e,"dealAmount",Q,Object(g.a)(e)),e.changeDealAmount=function(t,a){e.dealAmount=a.value},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this.getPlayerId();this.props.store.init("test",e)}},{key:"getPlayerId",value:function(){var e=window.location.href.split("?");if(e.length<2)return"";var t=e[1].split("=");return"playerId"===t[0]?t[1]:""}},{key:"render",value:function(){var e=this,t=this.props.store;return t&&0!==t.cards.length?p.a.createElement(w.a,{backend:D.a},p.a.createElement(k.a,null,"Mulle!"),"player1"===t.playerId&&p.a.createElement(p.a.Fragment,null,p.a.createElement(S,{piled:!0,cardIds:t.getCardsForPile("main"),backsideUp:!0}),p.a.createElement(j.a,{onClick:function(){return t.dealCardsToAllPlayers(Number(e.dealAmount))}},"Fordel kort"),p.a.createElement(C.a,{value:this.dealAmount,onChange:this.changeDealAmount})),p.a.createElement(A.a,{columns:3,divided:!0},p.a.createElement(A.a.Row,null,p.a.createElement(A.a.Column,null,p.a.createElement(Z,{playerId:"player1"})),p.a.createElement(A.a.Column,null,p.a.createElement(A.a,{columns:5},t.cardPiles.filter((function(e){return e.pileType===d.PLAY_AREA})).map((function(e){return p.a.createElement(A.a.Column,null,p.a.createElement(z,{position:e.position,piled:!0,backsideUp:!1}))})))),p.a.createElement(A.a.Column,null,p.a.createElement(Z,{playerId:"player2"}))))):null}}]),a}(u.Component),W=Object(P.a)(B.prototype,"showBackside",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Object(P.a)(B.prototype,"putInStack",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=Object(P.a)(B.prototype,"isOver",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Q=Object(P.a)(B.prototype,"dealAmount",[I.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"8"}}),x=B))||x)||x;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=new $;b.a.render(p.a.createElement(p.a.StrictMode,null,p.a.createElement(h.a,{store:ae},p.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[200,1,2]]]);
//# sourceMappingURL=main.c531a567.chunk.js.map